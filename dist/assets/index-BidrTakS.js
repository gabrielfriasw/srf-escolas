import{r as x,a as ce,g as ue,R as me,u as O,O as ge,b as J,B as he,c as xe,d as C,N as V}from"./vendor-D2u5-wMh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();var Z={exports:{}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=x,be=Symbol.for("react.element"),ye=Symbol.for("react.fragment"),pe=Object.prototype.hasOwnProperty,ve=fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,je={key:!0,ref:!0,__self:!0,__source:!0};function K(s,t,o){var r,n={},a=null,l=null;o!==void 0&&(a=""+o),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)pe.call(t,r)&&!je.hasOwnProperty(r)&&(n[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:be,type:s,key:a,ref:l,props:n,_owner:ve.current}}I.Fragment=ye;I.jsx=K;I.jsxs=K;Z.exports=I;var e=Z.exports,G,U=ce;G=U.createRoot,U.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var we={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),S=(s,t)=>{const o=x.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:d="",children:i,...g},c)=>x.createElement("svg",{ref:c,...we,width:n,height:n,stroke:r,strokeWidth:l?Number(a)*24/Number(n):a,className:["lucide",`lucide-${ke(s)}`,d].join(" "),...g},[...t.map(([u,f])=>x.createElement(u,f)),...Array.isArray(i)?i:[i]]));return o.displayName=`${s}`,o};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=S("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=S("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=S("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=S("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=S("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=S("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=S("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=S("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=S("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=S("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=S("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=S("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=S("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Te={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Y=s=>{let t;const o=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const y=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),o.forEach(p=>p(t,y))}},n=()=>t,i={setState:r,getState:n,getInitialState:()=>g,subscribe:c=>(o.add(c),()=>o.delete(c)),destroy:()=>{(Te?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},g=t=s(r,n,i);return i},Ie=s=>s?Y(s):Y;var se={exports:{}},re={},ae={exports:{}},ne={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R=x;function _e(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Pe=typeof Object.is=="function"?Object.is:_e,Le=R.useState,$e=R.useEffect,Fe=R.useLayoutEffect,He=R.useDebugValue;function ze(s,t){var o=t(),r=Le({inst:{value:o,getSnapshot:t}}),n=r[0].inst,a=r[1];return Fe(function(){n.value=o,n.getSnapshot=t,L(n)&&a({inst:n})},[s,o,t]),$e(function(){return L(n)&&a({inst:n}),s(function(){L(n)&&a({inst:n})})},[s]),He(o),o}function L(s){var t=s.getSnapshot;s=s.value;try{var o=t();return!Pe(s,o)}catch{return!0}}function qe(s,t){return t()}var Be=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qe:ze;ne.useSyncExternalStore=R.useSyncExternalStore!==void 0?R.useSyncExternalStore:Be;ae.exports=ne;var Ue=ae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=x,We=Ue;function Ye(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Xe=typeof Object.is=="function"?Object.is:Ye,Je=We.useSyncExternalStore,Ve=_.useRef,Ze=_.useEffect,Ke=_.useMemo,Ge=_.useDebugValue;re.useSyncExternalStoreWithSelector=function(s,t,o,r,n){var a=Ve(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=Ke(function(){function i(y){if(!g){if(g=!0,c=y,y=r(y),n!==void 0&&l.hasValue){var p=l.value;if(n(p,y))return u=p}return u=y}if(p=u,Xe(c,y))return p;var b=r(y);return n!==void 0&&n(p,b)?p:(c=y,u=b)}var g=!1,c,u,f=o===void 0?null:o;return[function(){return i(t())},f===null?void 0:function(){return i(f())}]},[t,o,r,n]);var d=Je(s,a[0],a[1]);return Ze(function(){l.hasValue=!0,l.value=d},[d]),Ge(d),d};se.exports=re;var Qe=se.exports;const et=ue(Qe),oe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:tt}=me,{useSyncExternalStoreWithSelector:st}=et;let X=!1;const rt=s=>s;function at(s,t=rt,o){(oe?"production":void 0)!=="production"&&o&&!X&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),X=!0);const r=st(s.subscribe,s.getState,s.getServerState||s.getInitialState,t,o);return tt(r),r}const nt=s=>{(oe?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof s=="function"?Ie(s):s,o=(r,n)=>at(t,r,n);return Object.assign(o,t),o},z=s=>nt,ot={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function lt(s,t){let o;try{o=s()}catch{return}return{getItem:n=>{var a;const l=i=>i===null?null:JSON.parse(i,void 0),d=(a=o.getItem(n))!=null?a:null;return d instanceof Promise?d.then(l):l(d)},setItem:(n,a)=>o.setItem(n,JSON.stringify(a,void 0)),removeItem:n=>o.removeItem(n)}}const D=s=>t=>{try{const o=s(t);return o instanceof Promise?o:{then(r){return D(r)(o)},catch(r){return this}}}catch(o){return{then(r){return this},catch(r){return D(r)(o)}}}},dt=(s,t)=>(o,r,n)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:h=>h,version:0,merge:(h,w)=>({...w,...h}),...t},l=!1;const d=new Set,i=new Set;let g;try{g=a.getStorage()}catch{}if(!g)return s((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),o(...h)},r,n);const c=D(a.serialize),u=()=>{const h=a.partialize({...r()});let w;const m=c({state:h,version:a.version}).then(j=>g.setItem(a.name,j)).catch(j=>{w=j});if(w)throw w;return m},f=n.setState;n.setState=(h,w)=>{f(h,w),u()};const y=s((...h)=>{o(...h),u()},r,n);let p;const b=()=>{var h;if(!g)return;l=!1,d.forEach(m=>m(r()));const w=((h=a.onRehydrateStorage)==null?void 0:h.call(a,r()))||void 0;return D(g.getItem.bind(g))(a.name).then(m=>{if(m)return a.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate)return a.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var j;return p=a.merge(m,(j=r())!=null?j:y),o(p,!0),u()}).then(()=>{w==null||w(p,void 0),l=!0,i.forEach(m=>m(p))}).catch(m=>{w==null||w(void 0,m)})};return n.persist={setOptions:h=>{a={...a,...h},h.getStorage&&(g=h.getStorage())},clearStorage:()=>{g==null||g.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:h=>(d.add(h),()=>{d.delete(h)}),onFinishHydration:h=>(i.add(h),()=>{i.delete(h)})},b(),p||y},it=(s,t)=>(o,r,n)=>{let a={storage:lt(()=>localStorage),partialize:b=>b,version:0,merge:(b,h)=>({...h,...b}),...t},l=!1;const d=new Set,i=new Set;let g=a.storage;if(!g)return s((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),o(...b)},r,n);const c=()=>{const b=a.partialize({...r()});return g.setItem(a.name,{state:b,version:a.version})},u=n.setState;n.setState=(b,h)=>{u(b,h),c()};const f=s((...b)=>{o(...b),c()},r,n);n.getInitialState=()=>f;let y;const p=()=>{var b,h;if(!g)return;l=!1,d.forEach(m=>{var j;return m((j=r())!=null?j:f)});const w=((h=a.onRehydrateStorage)==null?void 0:h.call(a,(b=r())!=null?b:f))||void 0;return D(g.getItem.bind(g))(a.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate)return[!0,a.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var j;const[v,N]=m;if(y=a.merge(N,(j=r())!=null?j:f),o(y,!0),v)return c()}).then(()=>{w==null||w(y,void 0),y=r(),l=!0,i.forEach(m=>m(y))}).catch(m=>{w==null||w(void 0,m)})};return n.persist={setOptions:b=>{a={...a,...b},b.storage&&(g=b.storage)},clearStorage:()=>{g==null||g.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:b=>(d.add(b),()=>{d.delete(b)}),onFinishHydration:b=>(i.add(b),()=>{i.delete(b)})},a.skipHydration||p(),y||f},ct=(s,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((ot?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),dt(s,t)):it(s,t),q=ct,$=[{id:"1",name:"Admin",email:"admin@example.com",password:"admin123",role:"COORDINATOR"}],A=z()(q(s=>({user:null,isAuthenticated:!1,login:(t,o)=>{const r=$.find(l=>l.email===t&&l.password===o);if(!r)throw new Error("Credenciais inválidas");const{password:n,...a}=r;s({user:a,isAuthenticated:!0})},register:(t,o,r,n)=>{if($.some(i=>i.email===o))throw new Error("Email já cadastrado");const a={id:Math.random().toString(36).substr(2,9),name:t,email:o,password:r,role:n};$.push(a);const{password:l,...d}=a;s({user:d,isAuthenticated:!0})},logout:()=>{s({user:null,isAuthenticated:!1})}}),{name:"auth-storage"})),ut=()=>{const[s,t]=x.useState(""),[o,r]=x.useState(""),[n,a]=x.useState(""),[l,d]=x.useState("TEACHER"),[i,g]=x.useState(!1),[c,u]=x.useState(""),f=O(),{login:y,register:p}=A(),b=async h=>{h.preventDefault(),u("");try{i?await p(n,s,o,l):await y(s,o),f("/dashboard")}catch(w){u(w.message)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"mx-auto h-12 w-12 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900 dark:text-white",children:i?"Criar nova conta":"Bem-vindo ao SRF"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Sistema de Registro de Faltas"})]}),c&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400 p-3 rounded-md text-sm",children:c}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome completo"}),e.jsx("input",{id:"name",type:"text",value:n,onChange:h=>a(h.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cargo"}),e.jsxs("select",{id:"role",value:l,onChange:h=>d(h.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"COORDINATOR",children:"Coordenador"}),e.jsx("option",{value:"TEACHER",children:"Professor"}),e.jsx("option",{value:"STUDENT_MONITOR",children:"Monitor"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-mail"}),e.jsx("input",{id:"email",type:"email",value:s,onChange:h=>t(h.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),e.jsx("input",{id:"password",type:"password",value:o,onChange:h=>r(h.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i?"Registrar":"Entrar"})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>{g(!i),u("")},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-500",children:i?"Já tem uma conta? Faça login":"Não tem uma conta? Registre-se"})})]})})},mt=({onClose:s})=>{const t=O(),o=A(y=>y.logout),r=A(y=>y.user),[n,a]=x.useState(localStorage.getItem("customLogo")||""),[l,d]=x.useState(!1),[i,g]=x.useState(""),c=y=>{t(y),s==null||s()},u=()=>{o(),t("/login"),s==null||s()},f=()=>{i&&(localStorage.setItem("customLogo",i),a(i),g(""),d(!1))};return e.jsxs("div",{className:"h-screen w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4 flex flex-col",children:[s&&e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-md lg:hidden",children:e.jsx(Me,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 mt-2",children:[n?e.jsx("img",{src:n,alt:"Logo",className:"h-8 w-8 object-contain"}):e.jsx(W,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"SRF"}),((r==null?void 0:r.role)==="COORDINATOR"||(r==null?void 0:r.role)==="TEACHER")&&e.jsx("button",{onClick:()=>d(!l),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700",children:e.jsx(W,{className:"h-4 w-4"})})]}),l&&e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",value:i,onChange:y=>g(y.target.value),placeholder:"URL da nova logo",className:"w-full p-2 rounded-md border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 mb-2"}),e.jsx("button",{onClick:f,className:"w-full px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Alterar Logo"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("nav",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>c("/dashboard"),className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(H,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Turmas"})]}),((r==null?void 0:r.role)==="COORDINATOR"||(r==null?void 0:r.role)==="TEACHER")&&e.jsxs("button",{onClick:()=>c("/dashboard/nova-turma"),className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(F,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Nova Turma"})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[e.jsxs("div",{className:"px-3 py-2",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Bem vindo(a), ",r==null?void 0:r.name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 break-words",children:r==null?void 0:r.email}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(r==null?void 0:r.role)==="COORDINATOR"?"Coordenador":(r==null?void 0:r.role)==="TEACHER"?"Professor":"Monitor"})]}),e.jsxs("button",{onClick:()=>c("/dashboard/configuracoes"),className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(Oe,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Configurações"})]}),e.jsxs("button",{onClick:u,className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 dark:text-red-400",children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:"Sair"})]})]})]})},le=()=>{const[s,t]=x.useState(localStorage.getItem("theme")||"light");return x.useEffect(()=>{s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",s)},[s]),{theme:s,toggleTheme:()=>{t(s==="light"?"dark":"light")}}},gt=()=>{const{theme:s,toggleTheme:t}=le();return e.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors","aria-label":"Alternar tema",children:s==="dark"?e.jsx(ee,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})},ht=()=>{const[s,t]=x.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>t(!1)}),e.jsx("div",{className:`fixed lg:static inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-200 ease-in-out z-30 lg:z-0`,children:e.jsx(mt,{onClose:()=>t(!1)})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4",children:[e.jsx("button",{onClick:()=>t(!0),className:"p-2 rounded-md lg:hidden",children:e.jsx(Se,{className:"h-6 w-6"})}),e.jsx(gt,{})]}),e.jsx("main",{className:"flex-1 overflow-auto p-4 sm:p-6",children:e.jsx(ge,{})})]})]})},M=z()(q((s,t)=>({classes:[],addClass:o=>s(r=>({classes:[...r.classes,{...o,id:Math.random().toString(36).substr(2,9)}]})),removeClass:o=>s(r=>({classes:r.classes.filter(n=>n.id!==o)})),updateClass:(o,r)=>s(n=>({classes:n.classes.map(a=>a.id===o?{...a,...r}:a)})),getClassesByUser:o=>t().classes.filter(n=>n.ownerId===o||n.monitorId===o),setMonitor:(o,r)=>{s(n=>({classes:n.classes.map(a=>a.id===o?{...a,monitorId:r}:a)}))}}),{name:"class-storage"})),B=({isOpen:s,onClose:t,onConfirm:o,title:r,message:n,confirmText:a="Confirmar",cancelText:l="Cancelar"})=>s?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:r}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:l}),e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:a})]})]})]})}):null,xt=()=>{const s=O(),t=A(u=>u.user),{classes:o,removeClass:r}=M(),[n,a]=x.useState(""),[l,d]=x.useState(null),g=o.filter(u=>u.ownerId===(t==null?void 0:t.id)||u.monitorId===(t==null?void 0:t.id)).filter(u=>u.name.toLowerCase().includes(n.toLowerCase())),c=u=>{r(u),d(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Minhas Turmas"}),((t==null?void 0:t.role)==="COORDINATOR"||(t==null?void 0:t.role)==="TEACHER")&&e.jsxs("button",{onClick:()=>s("/dashboard/nova-turma"),className:"w-full sm:w-auto flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Nova Turma"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Re,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Buscar turma...",value:n,onChange:u=>a(u.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white dark:bg-gray-700 dark:border-gray-600 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{className:"h-12 w-12 mx-auto text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:n?"Nenhuma turma encontrada":"Nenhuma turma cadastrada"}),!n&&((t==null?void 0:t.role)==="COORDINATOR"||(t==null?void 0:t.role)==="TEACHER")&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Comece criando sua primeira turma para registrar as presenças."}),e.jsxs("button",{onClick:()=>s("/dashboard/nova-turma"),className:"mt-4 inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Criar Turma"})]})]})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:g.map(u=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>s(`/dashboard/turma/${u.id}`),children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:u.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.grade})]}),((t==null?void 0:t.role)==="COORDINATOR"||(t==null?void 0:t.role)==="TEACHER")&&u.ownerId===t.id&&e.jsx("button",{onClick:()=>d(u.id),className:"text-red-600 hover:text-red-700 p-2",children:e.jsx(te,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[u.students.length," alunos"]})]})]},u.id))}),l&&e.jsx(B,{isOpen:!!l,onClose:()=>d(null),onConfirm:()=>c(l),title:"Excluir Turma",message:"Tem certeza que deseja excluir esta turma? Esta ação não pode ser desfeita."})]})},ft=()=>{const s=O(),t=M(i=>i.addClass),o=A(i=>i.user),[r,n]=x.useState({name:"",grade:"",pedagogistPhone:""}),[a,l]=x.useState(""),d=i=>{if(i.preventDefault(),l(""),!o){l("Você precisa estar logado para criar uma turma.");return}if(!r.name.trim()||!r.grade.trim()||!r.pedagogistPhone.trim()){l("Por favor, preencha todos os campos.");return}t({...r,students:[],ownerId:o.id}),s("/dashboard")};return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Nova Turma"}),a&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400 p-3 rounded-md",children:a}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome da Turma"}),e.jsx("input",{type:"text",id:"name",value:r.name,onChange:i=>n({...r,name:i.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Série/Ano"}),e.jsx("input",{type:"text",id:"grade",value:r.grade,onChange:i=>n({...r,grade:i.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pedagogistPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"WhatsApp do Pedagogo"}),e.jsx("input",{type:"tel",id:"pedagogistPhone",value:r.pedagogistPhone,onChange:i=>n({...r,pedagogistPhone:i.target.value}),required:!0,placeholder:"Ex: 5511999999999",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>s("/dashboard"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Criar Turma"})]})]})]})},de=z()(q((s,t)=>({records:[],addRecord:o=>{const r={...o,id:Math.random().toString(36).substr(2,9)};s(n=>({records:[...n.records,r]}))},getRecordsByClass:o=>t().records.filter(r=>r.classId===o),getMonthlyStats:(o,r,n)=>{const a=t().records.filter(d=>{const i=new Date(d.date);return d.classId===o&&i.getMonth()===r&&i.getFullYear()===n});if(a.length===0)return null;const l={};return a.forEach(d=>{d.absentStudents.forEach(i=>{l[i]=(l[i]||0)+1})}),{month:new Date(n,r).toLocaleString("pt-BR",{month:"long"}),year:n,totalAbsences:a.reduce((d,i)=>d+i.absentStudents.length,0),students:Object.entries(l).map(([d,i])=>({id:d,name:"",absences:i}))}}}),{name:"attendance-storage"})),bt=()=>e.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-blue-100 dark:bg-blue-900 px-4 sm:px-8 py-3 rounded-lg border-2 border-blue-200 dark:border-blue-800 text-sm sm:text-base whitespace-nowrap",children:"Mesa do Professor"}),T=({status:s,isActive:t,onClick:o})=>{const r="px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-medium transition-colors",n={P:"bg-green-600 text-white",F:"bg-red-600 text-white"};return e.jsx("button",{onClick:o,className:`${r} ${t?n[s]:"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,children:s})},yt=({student:s,position:t,attendance:o,onAttendanceChange:r,onDragStart:n,onDrag:a,onDragEnd:l,isDragging:d,deskDimensions:i})=>e.jsx("div",{draggable:!0,onDragStart:n,onDrag:a,onDragEnd:l,style:{position:"absolute",left:t.x,top:t.y,width:i.width,height:"auto",minHeight:i.height,cursor:d?"grabbing":"grab"},className:`
        bg-white dark:bg-gray-800 
        rounded-lg shadow-md 
        border-2 border-gray-200 dark:border-gray-700
        ${d?"z-50 opacity-90":"z-0"}
        transition-shadow hover:shadow-lg
      `,children:e.jsxs("div",{className:"h-full p-3 flex flex-col justify-between",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white break-words",children:[s.number,". ",s.name]}),e.jsxs("div",{className:"flex justify-center space-x-2 mt-2",children:[e.jsx(T,{status:"P",isActive:o==="P",onClick:()=>r("P")}),e.jsx(T,{status:"F",isActive:o==="F",onClick:()=>r("F")})]})]})}),pt=({onSave:s,onClose:t})=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Espelho de Classe"}),e.jsxs("div",{className:"flex space-x-4 w-full sm:w-auto",children:[e.jsx("button",{onClick:s,className:"flex-1 sm:flex-none px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm sm:text-base",children:"Salvar"}),e.jsx("button",{onClick:t,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 text-sm sm:text-base",children:"Fechar"})]})]}),vt=s=>{const[t,o]=x.useState({deskWidth:180,deskHeight:90,deskSpacingX:40,deskSpacingY:40,desksPerRow:4});return x.useEffect(()=>{const r=()=>{if(s.current){const n=s.current.clientWidth;let a=4,l=180,d=40;n<640?(a=2,l=160,d=20):n<768?(a=3,l=170,d=30):n<1024&&(a=3,l=180,d=40),o({deskWidth:l,deskHeight:l*.5,deskSpacingX:d,deskSpacingY:d,desksPerRow:a})}};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[s]),t},jt=({students:s,onClose:t,onSave:o,attendance:r,onAttendanceChange:n})=>{const[a,l]=x.useState({}),[d,i]=x.useState(null),[g,c]=x.useState(!1),[u,f]=x.useState(!1),y=x.useRef(null),p=vt(y);x.useEffect(()=>{const v={};s.forEach((N,k)=>{if(N.position)v[N.id]=N.position;else{const E=Math.floor(k/p.desksPerRow),P=k%p.desksPerRow;v[N.id]={x:P*(p.deskWidth+p.deskSpacingX)+p.deskSpacingX,y:E*(p.deskHeight+p.deskSpacingY)+100}}}),l(v)},[s,p]);const b=(v,N)=>{i(v);const k=new Image;k.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",N.dataTransfer.setDragImage(k,0,0)},h=(v,N)=>{var k;if(d===N&&v.clientX!==0&&v.clientY!==0){const E=(k=y.current)==null?void 0:k.getBoundingClientRect();if(E){const P=Math.max(0,Math.min(v.clientX-E.left-p.deskWidth/2,E.width-p.deskWidth)),ie=Math.max(0,Math.min(v.clientY-E.top-p.deskHeight/2,E.height-p.deskHeight));l({...a,[N]:{x:P,y:ie}}),f(!0)}}},w=()=>{i(null)},m=()=>{c(!0)},j=()=>{o(a),f(!1),c(!1)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 sm:p-6",children:[e.jsx(pt,{onSave:m,onClose:()=>{u?c(!0):t()}}),e.jsxs("div",{ref:y,className:"relative border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-900 overflow-hidden",style:{height:"70vh",minHeight:"400px"},children:[e.jsx(bt,{}),s.map(v=>e.jsx(yt,{student:v,position:a[v.id]||{x:0,y:0},attendance:r[v.id],onAttendanceChange:N=>n(v.id,N),onDragStart:N=>b(v.id,N),onDrag:N=>h(N,v.id),onDragEnd:w,isDragging:d===v.id,deskDimensions:{width:p.deskWidth,height:p.deskHeight}},v.id))]}),e.jsx(B,{isOpen:g,onClose:()=>c(!1),onConfirm:j,title:"Salvar Alterações",message:"Deseja salvar as alterações feitas no espelho de classe?"})]})},wt=({onAddStudent:s})=>{const[t,o]=x.useState({name:"",number:""}),[r,n]=x.useState(""),a=l=>{if(l.preventDefault(),n(""),!t.name.trim()||!t.number){n("Por favor, preencha o nome e o número do aluno.");return}const d=parseInt(t.number);if(isNaN(d)){n("O número do aluno deve ser válido.");return}s({name:t.name.trim(),number:d}),o({name:"",number:""})};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Adicionar Aluno"}),e.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"text",value:t.name,onChange:l=>o({...t,name:l.target.value}),placeholder:"Nome do aluno",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400"}),e.jsx("input",{type:"number",value:t.number,onChange:l=>o({...t,number:l.target.value}),placeholder:"Nº",className:"w-full sm:w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400"}),e.jsxs("button",{type:"submit",className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ee,{className:"h-5 w-5 mr-2"}),"Adicionar"]})]}),r&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r})]})},kt=({classId:s})=>{const[t,o]=x.useState(""),[r,n]=x.useState(""),[a,l]=x.useState(""),d=M(g=>g.setMonitor),i=async g=>{if(g.preventDefault(),n(""),l(""),!t.trim()){n("Por favor, insira o email do monitor.");return}try{const{data:c,error:u}=await supabase.from("profiles").select("*").eq("email",t).eq("role","STUDENT_MONITOR").single();if(u)throw u;if(!c){n("Monitor não encontrado ou o usuário não possui permissão de monitor.");return}d(s,c.id),l("Monitor atribuído com sucesso!"),o("")}catch(c){n(c.message||"Erro ao atribuir monitor.")}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 sm:p-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Atribuir Monitor"}),e.jsxs("form",{onSubmit:i,className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"email",value:t,onChange:g=>o(g.target.value),placeholder:"Email do monitor",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Atribuir Monitor"})]}),r&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r}),a&&e.jsx("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:a})]})},Nt=({students:s,attendance:t,onAttendanceChange:o,onRemoveStudent:r})=>{const[n,a]=x.useState(null),l=()=>{s.forEach(d=>{o(d.id,"P")})};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Lista de Alunos"}),e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md",children:"Marcar Todos Presentes"})]}),e.jsx("div",{className:"space-y-4",children:s.sort((d,i)=>d.number-i.number).map(d=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 w-full sm:w-auto",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 w-8",children:d.number}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 break-words flex-1",children:d.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 w-full sm:w-auto justify-between sm:justify-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{status:"P",isActive:t[d.id]==="P",onClick:()=>o(d.id,"P")}),e.jsx(T,{status:"F",isActive:t[d.id]==="F",onClick:()=>o(d.id,"F")})]}),e.jsx("button",{onClick:()=>a(d.id),className:"text-red-600 hover:text-red-700 dark:text-red-400",children:e.jsx(te,{className:"h-5 w-5"})})]})]},d.id))})]}),e.jsx(B,{isOpen:!!n,onClose:()=>a(null),onConfirm:()=>{n&&(r(n),a(null))},title:"Excluir Aluno",message:"Tem certeza que deseja excluir este aluno? Esta ação não pode ser desfeita."})]})},St=()=>{const{id:s}=J(),t=O(),{classes:o,updateClass:r}=M(),{addRecord:n}=de(),a=A(m=>m.user),l=o.find(m=>m.id===s),[d,i]=x.useState({}),[g,c]=x.useState(!1);if(x.useEffect(()=>{if(l){const m={};l.students.forEach(j=>{m[j.id]=null}),i(m)}},[l]),!l)return e.jsx("div",{children:"Turma não encontrada"});const u=(a==null?void 0:a.role)==="COORDINATOR"||(a==null?void 0:a.role)==="TEACHER",f=l.ownerId===(a==null?void 0:a.id),y=m=>{const j={id:Math.random().toString(36).substr(2,9),...m};r(s,{students:[...l.students,j]})},p=m=>{!u||!f||r(s,{students:l.students.filter(j=>j.id!==m)})},b=(m,j)=>{i(v=>({...v,[m]:j}))},h=m=>{const j=l.students.map(v=>({...v,position:m[v.id]}));r(s,{students:j}),c(!1)},w=()=>{const m={...d};l.students.forEach(k=>{m[k.id]||(m[k.id]="P")});const j=l.students.filter(k=>m[k.id]==="F").map(k=>k.id);n({classId:s,date:new Date().toISOString(),absentStudents:j});const v=l.students.filter(k=>m[k.id]==="F").map(k=>`(${k.number}) ${k.name}`).join(", "),N=`Registro de Presença - ${l.name} em ${new Date().toLocaleDateString()}:
Alunos Ausentes: ${v||"Nenhum"}`;setTimeout(()=>{const k=`https://wa.me/${l.pedagogistPhone}?text=${encodeURIComponent(N)}`;window.open(k,"_blank")},0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.grade})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>c(!g),className:"flex-1 sm:flex-none flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm sm:text-base",children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{children:"Espelho de Classe"})]}),e.jsxs("button",{onClick:w,className:"flex-1 sm:flex-none flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm sm:text-base",children:[e.jsx(De,{className:"h-5 w-5"}),e.jsx("span",{children:"Enviar Registro"})]}),e.jsx("button",{onClick:()=>t(`/dashboard/turma/${s}/historico`),className:"flex-1 sm:flex-none flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm sm:text-base",children:e.jsx("span",{children:"Histórico"})})]})]}),g?e.jsx(jt,{students:l.students,onClose:()=>c(!1),onSave:h,attendance:d,onAttendanceChange:b}):e.jsxs(e.Fragment,{children:[u&&f&&e.jsxs(e.Fragment,{children:[e.jsx(wt,{onAddStudent:y}),e.jsx(kt,{classId:l.id})]}),e.jsx(Nt,{students:l.students,attendance:d,onAttendanceChange:b,onRemoveStudent:p})]})]})},Ct=()=>{const{theme:s,toggleTheme:t}=le();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configurações"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Aparência"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Tema Escuro"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Alterne entre os temas claro e escuro"})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500",children:s==="dark"?e.jsx(ee,{className:"h-5 w-5"}):e.jsx(Q,{className:"h-5 w-5"})})]})]})]})},Et=()=>{const{id:s}=J(),{classes:t}=M(),{getMonthlyStats:o}=de(),r=t.find(c=>c.id===s),[n,a]=x.useState(new Date().getMonth()),[l,d]=x.useState(new Date().getFullYear());if(!r)return e.jsx("div",{children:"Turma não encontrada"});const i=o(s,n,l),g=Array.from({length:12},(c,u)=>{const f=new Date;return f.setMonth(f.getMonth()-u),{value:f.getMonth(),year:f.getFullYear(),label:f.toLocaleString("pt-BR",{month:"long",year:"numeric"})}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Histórico de Faltas - ",r.name]}),e.jsx("select",{value:`${l}-${n}`,onChange:c=>{const[u,f]=c.target.value.split("-").map(Number);d(u),a(f)},className:"w-full sm:w-auto px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white",children:g.map(c=>e.jsx("option",{value:`${c.year}-${c.value}`,children:c.label},`${c.year}-${c.value}`))})]}),i?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Resumo do Mês"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Total de faltas: ",i.totalAbsences]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Faltas por Aluno"}),e.jsx("div",{className:"space-y-3",children:i.students.map(c=>{const u=r.students.find(f=>f.id===c.id);return u?e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mr-2",children:[u.number,"."]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:u.name})]}),e.jsxs("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:[c.absences," faltas"]})]},c.id):null})})]})]}):e.jsx("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum registro de falta encontrado para este período."})})]})},At=({children:s})=>A(o=>o.isAuthenticated)?e.jsx(e.Fragment,{children:s}):e.jsx(V,{to:"/login"});function Rt(){return e.jsx(he,{children:e.jsxs(xe,{children:[e.jsx(C,{path:"/login",element:e.jsx(ut,{})}),e.jsxs(C,{path:"/dashboard",element:e.jsx(At,{children:e.jsx(ht,{})}),children:[e.jsx(C,{index:!0,element:e.jsx(xt,{})}),e.jsx(C,{path:"nova-turma",element:e.jsx(ft,{})}),e.jsx(C,{path:"turma/:id",element:e.jsx(St,{})}),e.jsx(C,{path:"turma/:id/historico",element:e.jsx(Et,{})}),e.jsx(C,{path:"configuracoes",element:e.jsx(Ct,{})})]}),e.jsx(C,{path:"*",element:e.jsx(V,{to:"/dashboard"})})]})})}G(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(Rt,{})}));
